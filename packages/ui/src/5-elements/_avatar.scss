@use '../abstract' as *;

.avatar {
  --p-text-size: var(--text-size, var(--font-size-1));
  $default-size: pxToRem(40);
  --p-size: var(--size, #{$default-size} ); /* default is medium size */
  --p-avatar-text-color: var(--p-avatar-text-color-default);
  --p-avatar-bg-color: var(--p-avatar-bg-color-default);
  --p-avatar-border-color: var(--p-avatar-border-color-default);

  /* default */
  --p-avatar-text-color-default:   var(--color-neutral-50);
  --p-avatar-bg-color-default:     var(--color-neutral-0);
  --p-avatar-border-color-default: var(--color-neutral-5);

  /* empty */
  --p-avatar-text-color-empty:   var(--color-neutral-50);
  --p-avatar-bg-color-empty:     var(--transparent);
  --p-avatar-border-color-empty: var(--color-neutral-30);

  /* orange */
  --p-avatar-text-color-orange:   var(--color-generic-0);
  --p-avatar-bg-color-orange:     var(--color-warning-100);
  --p-avatar-border-color-orange: var(--p-avatar-bg-color-orange);

  /* green */
  --p-avatar-text-color-green:   var(--color-generic-0);
  --p-avatar-bg-color-green:     var(--color-success-100);
  --p-avatar-border-color-green: var(--p-avatar-bg-color-green);

  /* blue */
  --p-avatar-text-color-blue:   var(--color-generic-0);
  --p-avatar-bg-color-blue:     var(--color-secondary-100);
  --p-avatar-border-color-blue: var(--p-avatar-bg-color-blue);

  /* pink */
  --p-avatar-text-color-pink:   var(--color-generic-0);
  --p-avatar-bg-color-pink:     var(--color-primary-100);
  --p-avatar-border-color-pink: var(--p-avatar-bg-color-pink);

  /* red */
  --p-avatar-text-color-red:   var(--color-generic-0);
  --p-avatar-bg-color-red:     var(--color-danger-100);
  --p-avatar-border-color-red: var(--p-avatar-bg-color-red);

  color: hsl(var(--p-avatar-text-color));
  background-color: hsl(var(--p-avatar-bg-color));
  border: solid pxToRem(1) hsl(var(--p-avatar-border-color));

  font-size: var(--p-text-size);
  width: var(--p-size);
  height: var(--p-size);
  border-radius: var(--border-radius-circular);

  display: grid;
  place-content: center;
  flex-shrink: 0; /* in case it a child of flexbox */
  overflow: hidden;
  text-transform: uppercase;
  -webkit-user-select: none;
  user-select: none;
  line-height: 1;

  [class*="icon"] { font-size:var(--p-text-size); }
  /* sizes */
  &.is-size-x-small  {
    --p-text-size:var(--font-size-00); $size:pxToRem(24); --p-size:#{$size};
    [class*="icon"] { --p-text-size:var(); }
  }
  &.is-size-small    {
    --p-text-size:var(--font-size-00); $size:pxToRem(32); --p-size:#{$size};
    [class*="icon"] { --p-text-size:var(--font-size-0); }
  }
  &.is-medium        {
    /* default */
    [class*="icon"] { --p-text-size:var(--font-size-3); }
  }
  &.is-large         {
    --p-text-size:var(--font-size-2); $size:pxToRem(48); --p-size:#{$size};
    [class*="icon"] { --p-text-size:var(--font-size-4); }
  }
  &.is-x-large       {
    --p-text-size:var(--font-size-4); $size:pxToRem(64); --p-size:#{$size};
    [class*="icon"] { --p-text-size:var(--font-size-4); }
  }

  /* color states */
  &.is-color-empty {
    border-style: dashed;
    --p-avatar-text-color: var(--p-avatar-text-color-empty);
    --p-avatar-bg-color: var(--p-avatar-bg-color-empty);
    --p-avatar-border-color: var(--p-avatar-border-color-empty);
  }
  &.is-color-orange {
    --p-avatar-text-color: var(--p-avatar-text-color-orange);
    --p-avatar-bg-color: var(--p-avatar-bg-color-orange);
    --p-avatar-border-color: var(--p-avatar-border-color-orange);
  }
  &.is-color-green {
    --p-avatar-text-color: var(--p-avatar-text-color-green);
    --p-avatar-bg-color: var(--p-avatar-bg-color-green);
    --p-avatar-border-color: var(--p-avatar-border-color-green);
  }
  &.is-color-blue {
    --p-avatar-text-color: var(--p-avatar-text-color-blue);
    --p-avatar-bg-color: var(--p-avatar-bg-color-blue);
    --p-avatar-border-color: var(--p-avatar-border-color-blue);
  }
  &.is-color-pink {
    --p-avatar-text-color: var(--p-avatar-text-color-pink);
    --p-avatar-bg-color: var(--p-avatar-bg-color-pink);
    --p-avatar-border-color: var(--p-avatar-border-color-pink);
  }
  &.is-color-red {
    --p-avatar-text-color: var(--p-avatar-text-color-red);
    --p-avatar-bg-color: var(--p-avatar-bg-color-red);
    --p-avatar-border-color: var(--p-avatar-border-color-red);
  }


  .theme-dark & {
    /* default */
    --p-avatar-bg-color-default:     var(--color-neutral-170);
    --p-avatar-border-color-default: var(--color-neutral-150);

    --p-avatar-border-color-empty:   var(--color-neutral-100);
  }
}

.avatars-group {
  &-item {
    font-size:.4rem; /* 1rem = 100px avatar */
    display:inline-flex; border-radius:50%; overflow:hidden;
    width:6.25em; height:6.25em;
    &:not(:first-child) {
      --p-indent: 3.75em;
      margin-inline-start: calc( var(--p-indent) * -1);
      -webkit-mask:radial-gradient(circle calc(var(--p-indent) - 0.3125em) at 0.3125em 50%, transparent 99%, #fff 100%);
       mask:radial-gradient(circle 3.4375em at 0.3125em 50%, transparent 99%, #fff 100%);
    }
  }
}