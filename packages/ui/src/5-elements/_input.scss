@use '../abstract' as *;

.label {
  cursor: pointer;
  line-height: 1.5;
  margin-bottom: pxToRem(4);
  &:where(.is-required)::after { content:"*"; color:hsl(var(--color-danger-100)); }
  .theme-dark & {
    color:hsl(var(--color-neutral-0));
  }
}

.optional { color:hsl(var(--color-neutral-50)); font-size:pxToRem(14); }

.helper {
  --p-text-color: var(--color-neutral-600);
  display:flex; font-size: pxToRem(14); color:hsl(var(--p-text-color)); font-weight:400;
  :where([class*="icon"]:first-child) { margin-inline-end:pxToRem(4); }
  :where(.theme-dark) &{
    --p-text-color: var(--color-blue-100);
  }
}

::placeholder {
  --p-placeholder-color:var(--color-neutral-100);
  color: hsl(var(--p-placeholder-color));
  text-align: left;

  .theme-dark &{
    --p-placeholder-color:var(--color-neutral-50);
  }
}

.input-text-wrapper {
  position: relative;
  &:where(.is-with-end-button) {
    .input-button {
      --p-text-color: var(--color-neutral-100);
      --p-bg-color: var(--color-neutral-0);
      --p-border-color: var(--color-neutral-10);

      position:absolute; inset-block:1px; inset-inline-end:1px;
      display:grid; place-content:center; width:pxToRem(46);
      background-color:hsl(var(--p-bg-color));
      border-inline-start:solid 1px hsl(var(--p-border-color));
      border-start-end-radius:var(--border-radius-xsmall); border-end-end-radius:var(--border-radius-xsmall);
      color: hsl(var(--p-text-color));
      &:disabled {--p-text-color: var(--color-neutral-50); }
      &:focus-visible {outline:revert;}
      .theme-dark & {
        --p-text-color: var(--color-neutral-50);
        --p-bg-color: var(--color-neutral-150);
        --p-border-color: var(--color-neutral-150);
      }
    }
  }
}

.input-text,
[type="text"],
[type="number"],
[type="password"],
[type="email"],
[type="url"],
[type="search"],
[type="tel"],
[type="file"],
select,
textarea {
  --p-text-color: var(--color-neutral-100);
  --p-bg-color: var(--color-generic-0);
  --p-border-color: var(--color-neutral-10);
  display:block; width:100%; outline:none;
  padding-block:pxToRem(12); padding-inline:pxToRem(16);
  color:hsl(var(--p-text-color)); line-height:1.375; font-weight:400;
  background-color:hsl(var(--p-bg-color));
  border:solid 1px hsl(var(--p-border-color)); border-radius:var(--border-radius-xsmall);
  &:hover {
    &:where(:not(#{$disabled})) {
      --p-border-color:var(--color-neutral-50);
    }
  }
  &.is-error          { box-shadow:0 0 0 pxToRem(1) hsl(var(--color-danger-100)), 0 0 0 pxToRem(4)  hsl(var(--color-danger-100) / 0.25); }
  &.is-warning        { box-shadow:0 0 0 pxToRem(1) hsl(var(--color-warning-100)), 0 0 0 pxToRem(4)  hsl(var(--color-warning-100) / 0.25); }
  &.is-success        { box-shadow:0 0 0 pxToRem(1) hsl(var(--color-success-100)), 0 0 0 pxToRem(4)  hsl(var(--color-success-100) / 0.25); }
  &:where(:focus)     { box-shadow:var(--focus-box-shadow); }
  &:where(:read-only) { --p-bg-color:var(--color-neutral-0); }
  &:where(#{$disabled}) {
    --p-text-color: var(--color-neutral-50);
    --p-bg-color: var(--color-generic-0);
    --p-border-color: var(--color-neutral-10);
  }

  .theme-dark & {
    --p-text-color: var(--color-neutral-50);
    --p-bg-color: var(--color-neutral-190);
    --p-border-color: var(--color-neutral-150);
    &:hover {
      &:where(:not(#{$disabled})) {
        --p-border-color:var(--color-neutral-100);
      }
    }
    &:where(:focus)  {}

    &:where(:read-only) {
      --p-bg-color:var(--color-neutral-150);
      --p-border-color: var(--color-neutral-100);
      + .input-button { --p-border-color: var(--color-neutral-100); }
    }
    &:where(#{$disabled}) {
      --p-text-color: var(--color-neutral-100);
      --p-bg-color: var(--color-neutral-190);
      + .input-button { --p-border-color: var(--color-neutral-150); }
    }
  }
}

textarea { height:pxToRem(200); }

[type="search"]{
  background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEwAACxMBAJqcGAAAAdZJREFUWIXt1s2LjWEYBvDfnDMzFpNIamZIFrMiJYMyFmKhZKfOwoiFr2LFn2BByG6WVrKwMcjWxgoLIlKIUk6RrzAjZWZ8LO731FlwvB+PUbjq6X0X7/VeV/d9P9fz8IdRL8Hpw3x8w0xaOz9GNxq4gJeZcGs1cRab0fU7xLfgMSYzoT3YgNXYhIO4iM+4iTWphGs4jikcFSXvhEGczr4/UFW8C2N4jXUFudvwCYeqGNgnSr6yJH8rpkWLCqMfE9hdUryFE3iC3qLEk7ij+kT34Q32FiHV8Qr7K4q3cArXihCGxd5elMjARnzBvE4f1dreV+AtnicycC/7/7K8BhaIvqXCO3zFwrwGZtCT0EAtW9N5DTSxWGR/CizNns/yEgbFEK5NZGCnaEPHE7e9Ai9wA6OJDIzistgJubFdxHB/RfFVYgCHixJruI5x5dNwDm6J47sUhkTvjpUw0Y1zeOrXR3hHjOA9zmBuTs4Arog4/yhuUZWwHPdFMh7280BZgiP4ILJ/UuymqRQmejPxphiquzgvKnMJDzOxB9glZqiRiecykbfHdawX98EhcdxO4BGu4nYm2EJDzEKPSMIdYrBnFYUq8d/EP2di1gey3cS4ErflvxffASbhcakIINaMAAAAAElFTkSuQmCC);
  background-position: left pxToRem(15) top 50%;
  background-size: pxToRem(20) pxToRem(20);
  background-repeat: no-repeat;
  padding-left: pxToRem(48);
}

[type="password"] {
  padding-inline-end: pxToRem(48);
  &:where(:not(:placeholder-shown)) { font-weight:bold; }
  &:where(:placeholder-shown) {
    ~ .show-password-button { opacity:0.5; }
  }
}

.show-password-button {
  position:absolute; inset-inline-end:pxToRem(0); inset-block-start:pxToRem(4);
  padding-inline:pxToRem(16); border-radius: var(--border-radius-small); font-size:pxToRem(20); transition:var(--transition);
}

.select {
  --p-text-color: var(--color-neutral-900);
  position: relative;

  select {
    cursor: pointer;
    padding-inline-end: pxToRem(48);
    &:focus { outline:unset; }
  }
  :where(.icon-down-open) {
    position:absolute; inset-block-start:pxToRem(10); inset-inline-end:pxToRem(16);
    pointer-events:none; color:hsl(var(--p-text-color));
  }
}

[type="file"] {
  cursor:pointer; line-height:calc(#{pxToRem(52) - pxToRem(10)});
  &::-webkit-file-upload-button{ line-height:1; }
}

[type="checkbox"],
[type="radio"] {
  --p-icon-color:var(--color-generic-0);
  --p-bg-color:var(--color-generic-0);
  --p-border-color:var(--color-primary-100);

  display:inline-grid; place-content:center;
  width:pxToRem(26); height:pxToRem(26);
  background:hsl(var(--p-bg-color)); border:solid pxToRem(3) hsl(var(--p-border-color));
  color:hsl(var(--p-icon-color)); vertical-align:middle; cursor:pointer;

  &:where(:disabled) { opacity:0.5; filter:grayscale(1); }
  &:focus-visible{ outline:revert; }

  .theme-dark &{
    --p-icon-color: var(--color-dark-700);
    --p-bg-color: var(--color-dark-700);
    --p-border-color: var(--color-blue-100);
  }
}
[type="radio"] {
  border-radius: var(--border-radius-circular);
  &:checked{ border-width:pxToRem(8); }
}
[type="checkbox"]{
  border-radius: var(--border-radius-xsmall);
  &:where(:checked){
    --p-bg-color: var(--color-primary-100);
    &::before{
      font-family: "fontello";
      content: '\e83d';
    }
  }
  .theme-dark &{
    &:checked {
      --p-bg-color: var(--color-blue-100);
    }
  }
}

.checkboxes {
  &-header { display:flex; justify-content:space-between; }
  &-options { display:flex; gap:pxToRem(10); font-size:pxToRem(13); }
  &-list { display:grid; grid-template-columns:repeat(2, 1fr); gap:pxToRem(30);}
  &-item {
    :where([type="checkbox"]) { margin-inline-end:pxToRem(10); }
  }
}


.switch{
  --p-bg-color: var(--color-neutral-600);

  all:unset; position:relative; display:inline-flex; box-sizing:border-box;
  width:pxToRem(52); height:pxToRem(32); border-radius:var(--border-radius-medium);
  padding:pxToRem(5); background-color:hsl(var(--p-bg-color));
  cursor:pointer; transition:var(--transition);
  &::before {
    content:""; position:absolute; left:5px;
    width:pxToRem(22); height:pxToRem(22);
    background-color:hsl(var(--color-generic-0)); border-radius:var(--border-radius-circular);
    transition:var(--transition);
  }
  &:where(:checked) {
    --p-bg-color:var(--color-success-100);
    &::before { transform:translateX(pxToRem(21)); }
  }
  &:where(:disabled){
    opacity:0.5;
  }
  .theme-dark &{
    --p-bg-color: var(--color-blue-200);
    &:checked {
      --p-bg-color: var(--color-success-100);
    }
  }
}

.password-meter {
  position:absolute; z-index:2; bottom:pxToRem(4); inset-inline:pxToRem(8);
  width:0%; height:pxToRem(2); max-width:#{calc(100% - pxToRem(16))}; background:none;
  transition:var(--transition);

  &::-webkit-meter-optimum-value { background-image:none; } /* Safari */
  &::-webkit-meter-bar { background:none; } /* Safari */
  &::-moz-meter-bar { background:none; } /* FireFox */
  &.is-weak {
    background: hsl(var(--color-danger-120)); width:33.33%;
    &::-webkit-meter-optimum-value { background-color:hsl(var(--color-danger-120)); } /* Safari */
  }
  &.is-medium {
    background: hsl(var(--color-ok)); width:66.66%;
    &::-webkit-meter-optimum-value { background-color:hsl(var(--color-ok)); } /* Safari */
  }
  &.is-strong {
    background: hsl(var(--color-success-100)); width:100%;
    &::-webkit-meter-optimum-value { background-color:hsl(var(--color-success-100)); } /* Safari */
  }
}

/* tags input partial */
.tags-input {
  @extend .input-text;
  padding-block:pxToRem(7); padding-inline:pxToRem(15);
  display:flex; gap:10px; align-items:center; flex-wrap:wrap; height:auto;
  &-text { all:unset; flex:1; font-size:pxToRem(14); }
  &-delete-button {}
  &.is-focus {box-shadow: var(--focus-box-shadow); }

    /* default not read-only!!! */
    &:read-only {
      --p-bg-color: var(--color-generic-0);
      &.is-readonly { --p-bg-color: var(--color-neutral-0);}

      .theme-dark &{
        --p-bg-color: var(--color-neutral-190);
        --p-border-color: var(--color-neutral-150);
        &:hover {
          --p-border-color: var(--color-neutral-100);
        }
        &.is-disabled {
          --p-border-color: var(--color-neutral-150);
        }
        &.is-readonly {
          --p-bg-color: var(--color-neutral-150);
          --p-border-color: var(--color-neutral-100);
          .tag {
            --tag-bg-color: var(--color-neutral-100);
            --tag-text-color: var(--color-neutral-10);
          }
        }
      }
    }

}

.tags {
  display:contents;
  &-list { display:contents; gap:10px; flex-wrap:wrap; }
}

.tag {
  --p-bg-color: var(--tag-bg-color, var(--color-neutral-10));
  --p-text-color: var(--tag-text-color, var(--color-neutral-100));
  display:flex; gap:6px; align-items:center;
  background-color:hsl(var(--p-bg-color)); padding-inline:pxToRem(8); padding-block:pxToRem(6); border-radius:var(--border-radius-xsmall);
  color:hsl(var(--p-text-color));
  &-delete-button {
    [class*="icon"]::before { vertical-align:middle; }
  }
  &.is-disabled {  --p-text-color:var(--color-neutral-50); }
  .theme-dark &{
    --tag-bg-color: var(--color-neutral-150);
    --tag-text-color: var(--color-neutral-50);
  }
}

.x-button {
  --p-size: var(--size, 16);
  --p-text-color: var(--button-text-color, var(--color-generic-0));
  --p-bg-color: var(--button-bg-color, var(--color-neutral-900));

  width: calc( var(--p-size) / 16 * 1rem);
  height: calc( var(--p-size) / 16 * 1rem);
  font-size: calc(var(--p-size) / 16 * 0.70 * 1rem); /* 0.75 */

  background-color: hsl(var(--p-bg-color));
  color: hsl(var(--p-text-color));
  border-radius: var(--border-radius-circular);

  display:inline-grid; place-content:center; line-height:1;

}
/* END - tags input partial */

.form {
  &-list { display:flex; flex-direction:column; gap:pxToRem(30); }
  &-item {  }
}